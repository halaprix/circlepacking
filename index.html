<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <title>Circle Packing Calculator Demo</title>
	<style>
    body {margin:1em;font: 16px "Helvetica Neue",Helvetica, Arial, sans-serif;}
    input {font: 16px "Helvetica Neue",Helvetica, Arial, sans-serif;}
  </style>
	<script src="circlepacking.js"></script>
	<script type="text/javascript">
    function draw(n, circleDiameter, containerDiameter) {
      var context,canvas
      canvas = document.getElementById('myCanvas')
      context = canvas.getContext('2d')
      getPositions(n, function (resultArray) {
        canvas.width = containerDiameter + 2
        canvas.height = containerDiameter + 2
        context.beginPath()
        context.arc(containerDiameter / 2 + 1, containerDiameter / 2 + 1, containerDiameter / 2, 0, Math.PI * 2, true)
        context.closePath()
        context.stroke()
        context.fillStyle = '#0f628b' //Color of internal circles
        for(var i = 0; i < resultArray.length; i++) {
          context.beginPath()
          context.arc(containerDiameter / 2 + containerDiameter / 2 * parseFloat(resultArray[i][0]) + 1, containerDiameter / 2 + containerDiameter / 2 * parseFloat(resultArray[i][1]) + 1, circleDiameter / 2, 0, Math.PI * 2, true)
          context.closePath()
          context.fill()
        }
      })
    }
		function calculateContainerDiameter() {
      var n, circleDiameter, containerDiameter
      circleDiameter = parseFloat(document.getElementById('circleDiameter').value)
      n = parseFloat(document.getElementById('numberOfCircles').value)
		  containerDiameter = getContainerDiameter(n, circleDiameter)
      document.getElementById('containerDiameter').value = containerDiameter
      document.getElementById('packingDensity').value = getPackingDensity(n, circleDiameter, containerDiameter)
      draw(n, circleDiameter, containerDiameter)
		}
		function calculateCircleDiameter() {
      var n, circleDiameter, containerDiameter
      containerDiameter = parseFloat(document.getElementById('containerDiameter').value)
      n = parseFloat(document.getElementById('numberOfCircles').value)
		  circleDiameter = getCircleDiameter(n, containerDiameter)
      document.getElementById('circleDiameter').value = circleDiameter
      document.getElementById('packingDensity').value = getPackingDensity(n, circleDiameter, containerDiameter)
      draw(n, circleDiameter, containerDiameter)
		}
		function calculateN() {
      var n, circleDiameter, containerDiameter
      circleDiameter = parseFloat(document.getElementById('circleDiameter').value)
      containerDiameter = parseFloat(document.getElementById('containerDiameter').value)
      n = getN(circleDiameter, containerDiameter)
      document.getElementById('numberOfCircles').value = n
      document.getElementById('packingDensity').value = getPackingDensity(n, circleDiameter, containerDiameter)
      draw(n, circleDiameter, containerDiameter)
		}
  </script>
</head>
<body onload="calculateContainerDiameter()">
<a href="javascript:window.location.href=(document.getElementById('myCanvas').toDataURL('image/png').replace('image/png', 'image/octet-stream'))" download="circlepack.png" style="float:right;">Download Image</a>
Number of Inner Circles:<input type="text" id="numberOfCircles" value=7><input type="button" value="<- Calculate" onClick="calculateN()"><br>
Inner Circle Diameter:<input type="text" id="circleDiameter" value=100><input type="button" value="<- Calculate" onClick="calculateCircleDiameter()"><br>
Container Circle Diameter:<input type="text" id="containerDiameter"><input type="button" value="<- Calculate" onClick="calculateContainerDiameter()"><br>
Packing Density:<input type="text" id="packingDensity" style="border: 0;" value=0 readonly><br>
<hr>
<canvas id="myCanvas"></canvas>
<script type="text/javascript">
</script>
</body>
</html>